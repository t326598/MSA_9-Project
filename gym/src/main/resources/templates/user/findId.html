<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아이디 찾기</title>
    <link rel="stylesheet" href="/css/home/join.css">
</head>
<body class="fullBody">
    <th:block th:replace="~{fragment/header::header}"></th:block>
    
   
    <div class="top-space"></div>

    <div class="container1 col-12 col-lg-4" style="margin-top: 50px; margin-bottom: 50px;" id="contain-box">
        <div class="px-4 py-5 mt-5 text-center">
            <img class="FITlogo" src="/img/logo2.png" alt="">
            <h1 class="joins">아이디 찾기</h1>
        </div>

        <!-- 회원가입 영역 -->
        <main class="form-signin login-box w-100 m-auto" >
            <form id="form" action="findId" method="post" class="needs-validation" onsubmit="return validateForm(event)">


                <input type="hidden" id="phone" name="phone" />
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

                <div class="centerdhkwnj">
                <div class="input-group my-2" >
                    <label for="name">이름</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="이름">
                </div>
                
                <div class="input-group my-2 phone-group">
                    <label for="phone">연락처</label>
                    <div class="phone-row">
                        <input type="text" class="form-control" id="phone1" name="phone1" placeholder="010">
                        <span>-</span>
                        <input type="text" class="form-control" id="phone2" name="phone2" placeholder="1234">
                        <span>-</span>
                        <input type="text" class="form-control" id="phone3" name="phone3" placeholder="5678">
                    </div>
                </div>
                
                <div class="input-group my-2">
                    <label for="question">질문</label>
                    <select class="form-control"  name="question" id="question">
                        <option value="강아지 이름은?">강아지 이름은?</option>
                        <option value="졸업한 초등학교는?">졸업한 초등학교는?</option>
                        <option value="내 보물 1호는?">내 보물 1호는?</option>
                        <option value="내 별명은?">내 별명은?</option>

                    </select>
                </div>
                
                <div class="input-group my-2" style="margin-bottom: 20px;">
                    <label for="answer">답변</label>
                    <input type="text" class="form-control" id="answer" name="answer" placeholder="답변">
                </div>
            </div>
                <div class="d-grid gap-2">
                    <button class="btn-join"  type="submit">찾기</button>
                </form>
            </div>
        </main>

    </div>


   

    <script>


function validateForm(event) {
    // 연락처 합치기
    const phone1 = document.getElementById('phone1').value.trim();
    const phone2 = document.getElementById('phone2').value.trim();
    const phone3 = document.getElementById('phone3').value.trim();
    const phone = `${phone1}${phone2}${phone3}`; // 연락처 합치기

    // 폼의 숨겨진 phone 필드에 값 설정
    document.getElementById('phone').value = phone;

    // 필수 입력 필드 체크
    const requiredFields = ['name', 'question', 'answer'];
    for (let field of requiredFields) {
        const inputElement = document.getElementsByName(field)[0];
        const labelText = inputElement.previousElementSibling.textContent.trim();
        const value = inputElement.value.trim();

        if (!value) {
            alert(`${labelText}을(를) 입력해주세요.`);
            return false; // 유효성 검사 실패 시 폼 제출 중단
        }
    }

    // 연락처 필드 검사
    if (!phone1 || !phone2 || !phone3) {
        alert('연락처를 정확히 입력해주세요.');
        return false;
    }

    // 모든 유효성 검사 통과 시 폼 제출 허용
    return true;
}

    </script>

     
<th:block th:replace="~{fragment/footer::footer}"></th:block>
<th:block th:replace="~{fragment/script::script}"></th:block>    
</body>
</html>
